---
title: antDesign
date: 2022-02-09 11:46:14
permalink: /pages/63cf04/
categories:
  - 前端
  - vue总结
  - ui框架总结
tags:
  - 
---

#### 栅格布局

栅格布局通过row 设置行，通过col设置列，ant的栅格为`24`栅格系统

col属性的span控制占一行的几份(0为不显示，24会占满一行)

````jsx
<a-row>
    <a-col></a-col>
</a-row>
````

##### 配合a-form时踩坑

控制 整体需求居中对齐，label文字居右对齐

````jsx
<a-form>
	<a-row :gutter="24">
    	<a-col :span='12'>
                <a-form-item 
                    :label-col="formItemLayout.labelCol" 
                    :wrappercol="formItemLayout.wrapperCol" label="Label">
          <a-input
            placeholder="请输入"
          />
        </a-form-item>
        </a-col>
    </a-row>
</a-form>
data>
const formItemLayout = {
  labelCol: { span: 6 },  //控制label占比
  wrapperCol: { span: 10 } //控制输入框占比
}
````

### 表单收集

````javascript
a-form 组件加上 :form="form"

//并且在beforeCreate阶段加上,data中不需要声明form
 this.form = this.$form.createForm(this, { name: 'dynamic_form_item' })

//表单项需要使用
v-decorator="['type(绑定的字段名)', { rules:(验证规则) [{ required:(必填) true, message: '请选择' }] }]"
//绑定

即可通过this.form.vaidateFelds((err,form)=>{err:错误信息,form:成功后的表单对象})验证并获取表单


````

更灵活的使用方式

#### 数据请求完毕自动填充所有表单项

````javascript
this.form.setFieldsValue({
    '表单项':value
    ...
})
````

#### 自定义表单字段

例如ant上传文件组件是没有value值的，这时我们可以自定义一个表单字段，监听上传完成事件，操作该字段，收集上传完成后的url

````javascript
beforeCreate(){
    this.form = this.$form.createForm(this, { name: 'dynamic_form_item' }) 
    this.form.getFieldDecorator('keys', { initialValue: [1], preserve: true })
    //keys:表单字段  
    //initialValue: 默认值
    //preserve:布尔值，true表示 即便字段不再使用，也保留该字段的值
    //更多属性查询：https://www.antdv.com/components/form-cn/#API
}
````

上传文件组件的beforeUpload事件

````javascript
-上传请求完毕
	-拿到url根据场景是否需要格式化
	const {url,id,fileName} = res.result
	this.fileList.push({
            name: fileName,
            uid: id,
            url,
            status: 'done'
          })
	this.form.setFieldsValue({
        绑定字段：this.fileList
    })
````

文件移除时remove回调更新form

````javascript
handleRemove(data){
    //过滤掉
    this.fileList=this.fileList.filter(item=>item.uid !== data.uid)
    this.form.setFieldsValue({...}) //设置
    //this.fileList为upload绑定的上传后的值
}
````





### moment对antDesign的时间选择器进行转换

antDesign的日期和时间选择器返回的都是moment格式对象，在前后端通信时需要转换格式

````javascript
import moment from 'moment' //引入
//字符串转为moment对象
moment('2022-02-08') //日期
moment('8:00') //时间



//moment转字符串
cosnt time //time假设为从日期选择器获取的moment对象
cosnt time2 //time2假设为从时间选择器获取的moment对象
moment(time).format('YYYY-MM-DD') //日期
moment(time2).format('HH:mm') //时间同理

````

